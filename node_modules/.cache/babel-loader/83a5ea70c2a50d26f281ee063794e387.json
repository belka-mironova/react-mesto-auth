{"ast":null,"code":"var _jsxFileName = \"/Users/belka/Desktop/yandexPr/react-mesto-auth/src/components/App.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport \"../index.css\";\nimport Header from \"./Header.js\";\nimport Main from \"./Main.js\";\nimport Footer from \"./Footer.js\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport api from \"../utils/Api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [isEditProfilePopupOpen, openEditProfile] = useState(false);\n  const [isAddPlacePopupOpen, openAddPlace] = useState(false);\n  const [isEditAvatarPopupOpen, openEditAvatar] = useState(false);\n  const [selectedCard, setSelectedCards] = useState({});\n  const [currentUser, setCurrentUser] = useState({});\n  const [isloggedIn, setIsloggedIn] = useState(true);\n  const [cards, setCards] = useState([]);\n  useEffect(() => {\n    api.getInitialCards().then(data => {\n      setCards(data);\n    }).catch(err => console.error(err));\n    api.getUserData().then(data => {\n      setCurrentUser(data);\n    }).catch(err => console.error(err));\n  }, []);\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    if (!isLiked) {\n      api.setLikeCard(card._id).then(newCard => {\n        setCards(state => state.map(c => c._id === card._id ? newCard : c));\n      }).catch(err => console.error(err));\n    } else {\n      api.deleteLikeCard(card._id).then(newCard => {\n        setCards(state => state.map(c => c._id === card._id ? newCard : c));\n      }).catch(err => console.error(err));\n    }\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id).then(() => {\n      setCards(cards => cards.filter(function (e) {\n        return e._id !== card._id;\n      }));\n    }).catch(err => console.error(err));\n  }\n\n  function handleAddPlaceSubmit(data) {\n    api.postCard(data).then(data => {\n      setCards([data, ...cards]);\n      closeAllPopups();\n    }).catch(err => console.error(err));\n  }\n\n  const handleEditAvatarClick = () => {\n    openEditAvatar(!isEditAvatarPopupOpen);\n  };\n\n  const handleEditProfileClick = () => {\n    openEditProfile(!isEditProfilePopupOpen);\n  };\n\n  const handleAddPlaceClick = () => {\n    openAddPlace(!isAddPlacePopupOpen);\n  };\n\n  const closeAllPopups = () => {\n    openEditAvatar(false);\n    openEditProfile(false);\n    openAddPlace(false);\n    setSelectedCards({});\n  };\n\n  const handleCardClick = card => {\n    setSelectedCards(card);\n  };\n\n  function handleUpdateUser(data) {\n    api.setUserData(data).then(data => {\n      setCurrentUser(data);\n      closeAllPopups();\n    }).catch(err => console.error(err));\n  }\n\n  function handleUpdateAvatar(data) {\n    api.setNewAvatar(data).then(data => {\n      setCurrentUser(data);\n      closeAllPopups();\n    }).catch(err => console.error(err));\n  }\n\n  return /*#__PURE__*/_jsxDEV(BrowserRouter, {\n    children: /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n      value: currentUser,\n      children: /*#__PURE__*/_jsxDEV(\"body\", {\n        className: \"root\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"page\",\n          children: [/*#__PURE__*/_jsxDEV(Header, {\n            isloggedIn: isloggedIn\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Switch, {\n            children: [/*#__PURE__*/_jsxDEV(ProtectedRoute, {\n              path: \"/\",\n              loggedIn: isloggedIn,\n              onEditProfile: handleEditProfileClick,\n              onAddPlace: handleAddPlaceClick,\n              onEditAvatar: handleEditAvatarClick,\n              isEditAvatarPopupOpen: isEditAvatarPopupOpen,\n              isAddPlacePopupOpen: isAddPlacePopupOpen,\n              isEditProfilePopupOpen: isEditProfilePopupOpen,\n              onCloseAll: closeAllPopups,\n              onCardClick: handleCardClick,\n              selectedCard: selectedCard,\n              handleUpdateUser: handleUpdateUser,\n              handleUpdateAvatar: handleUpdateAvatar,\n              handleCardLike: handleCardLike,\n              handleCardDelete: handleCardDelete,\n              cards: cards,\n              handleAddPlaceSubmit: handleAddPlaceSubmit,\n              component: Main\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              path: \"/register\",\n              children: /*#__PURE__*/_jsxDEV(Register, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              path: \"/login\",\n              children: /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"Ekj3HqfWj9czlaDP640Fzj1Kcv0=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","Header","Main","Footer","CurrentUserContext","api","App","isEditProfilePopupOpen","openEditProfile","isAddPlacePopupOpen","openAddPlace","isEditAvatarPopupOpen","openEditAvatar","selectedCard","setSelectedCards","currentUser","setCurrentUser","isloggedIn","setIsloggedIn","cards","setCards","getInitialCards","then","data","catch","err","console","error","getUserData","handleCardLike","card","isLiked","likes","some","i","_id","setLikeCard","newCard","state","map","c","deleteLikeCard","handleCardDelete","deleteCard","filter","e","handleAddPlaceSubmit","postCard","closeAllPopups","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleCardClick","handleUpdateUser","setUserData","handleUpdateAvatar","setNewAvatar"],"sources":["/Users/belka/Desktop/yandexPr/react-mesto-auth/src/components/App.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport \"../index.css\";\nimport Header from \"./Header.js\";\nimport Main from \"./Main.js\";\nimport Footer from \"./Footer.js\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport api from \"../utils/Api\";\n\nfunction App() {\n  const [isEditProfilePopupOpen, openEditProfile] = useState(false);\n  const [isAddPlacePopupOpen, openAddPlace] = useState(false);\n  const [isEditAvatarPopupOpen, openEditAvatar] = useState(false);\n  const [selectedCard, setSelectedCards] = useState({});\n  const [currentUser, setCurrentUser] = useState({});\n  const [isloggedIn, setIsloggedIn] = useState(true);\n\n  const [cards, setCards] = useState([]);\n\n  useEffect(() => {\n    api\n      .getInitialCards()\n      .then((data) => {\n        setCards(data);\n      })\n      .catch((err) => console.error(err));\n\n    api\n      .getUserData()\n      .then((data) => {\n        setCurrentUser(data);\n      })\n      .catch((err) => console.error(err));\n  }, []);\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n    if (!isLiked) {\n      api\n        .setLikeCard(card._id)\n        .then((newCard) => {\n          setCards((state) =>\n            state.map((c) => (c._id === card._id ? newCard : c))\n          );\n        })\n        .catch((err) => console.error(err));\n    } else {\n      api\n        .deleteLikeCard(card._id)\n        .then((newCard) => {\n          setCards((state) =>\n            state.map((c) => (c._id === card._id ? newCard : c))\n          );\n        })\n        .catch((err) => console.error(err));\n    }\n  }\n\n  function handleCardDelete(card) {\n    api\n      .deleteCard(card._id)\n      .then(() => {\n        setCards((cards) =>\n          cards.filter(function (e) {\n            return e._id !== card._id;\n          })\n        );\n      })\n      .catch((err) => console.error(err));\n  }\n\n  function handleAddPlaceSubmit(data) {\n    api\n      .postCard(data)\n      .then((data) => {\n        setCards([data, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => console.error(err));\n  }\n\n  const handleEditAvatarClick = () => {\n    openEditAvatar(!isEditAvatarPopupOpen);\n  };\n\n  const handleEditProfileClick = () => {\n    openEditProfile(!isEditProfilePopupOpen);\n  };\n\n  const handleAddPlaceClick = () => {\n    openAddPlace(!isAddPlacePopupOpen);\n  };\n\n  const closeAllPopups = () => {\n    openEditAvatar(false);\n    openEditProfile(false);\n    openAddPlace(false);\n    setSelectedCards({});\n  };\n\n  const handleCardClick = (card) => {\n    setSelectedCards(card);\n  };\n\n  function handleUpdateUser(data) {\n    api\n      .setUserData(data)\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch((err) => console.error(err));\n  }\n\n  function handleUpdateAvatar(data) {\n    api\n      .setNewAvatar(data)\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch((err) => console.error(err));\n  }\n\n  return (\n    <BrowserRouter>\n      <CurrentUserContext.Provider value={currentUser}>\n        <body className=\"root\">\n          <div className=\"page\">\n            <Header isloggedIn={isloggedIn} />\n\n            <Switch>\n              <ProtectedRoute\n                path=\"/\"\n                loggedIn={isloggedIn}\n                onEditProfile={handleEditProfileClick}\n                onAddPlace={handleAddPlaceClick}\n                onEditAvatar={handleEditAvatarClick}\n                isEditAvatarPopupOpen={isEditAvatarPopupOpen}\n                isAddPlacePopupOpen={isAddPlacePopupOpen}\n                isEditProfilePopupOpen={isEditProfilePopupOpen}\n                onCloseAll={closeAllPopups}\n                onCardClick={handleCardClick}\n                selectedCard={selectedCard}\n                handleUpdateUser={handleUpdateUser}\n                handleUpdateAvatar={handleUpdateAvatar}\n                handleCardLike={handleCardLike}\n                handleCardDelete={handleCardDelete}\n                cards={cards}\n                handleAddPlaceSubmit={handleAddPlaceSubmit}\n                component={Main}\n              />\n              <Route path=\"/register\">\n                <Register />\n              </Route>\n              <Route path=\"/login\">\n                <Login />\n              </Route>\n            </Switch>\n\n            <Footer />\n          </div>\n        </body>\n      </CurrentUserContext.Provider>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}